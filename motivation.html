<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Motivation Tool</title>
<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Barriecito&family=Winky+Sans&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Winky Sans', sans-serif; background-color: #fdf6e3; color: #1b3a2d; padding:20px; text-align:center; }
  h1 { font-family: 'Barriecito', cursive; font-size:3rem; color:#ff9aa2; margin-bottom:20px; }
  label { margin-left:8px; display:block; margin-bottom:10px; }
  #motivationChecklist {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  li {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 10px 0;
  }
  select { margin-left:10px; }
  .special-reward-text { color:#ff6f61; font-weight:bold; font-size:1.3em; margin-top:20px; }
  .btn { background-color:#ff9aa2; color:#fdf6e3; border:none; padding:10px 15px; cursor:pointer; margin-top:10px; font-family:'Barriecito', cursive; display:block; margin-left:auto; margin-right:auto; }
</style>
</head>
<body>

<h1>Motivation Tool</h1>

<label>Choose Overall Task: 
  <select id="taskSelect">
    <option value="emptyDishwasher">Empty Dishwasher</option>
    <option value="cleanBathroom">Clean Bathroom</option>
    <option value="writeEssay">Write Essay</option>
    <option value="laundry">Do Laundry</option>
    <option value="custom">Custom...</option>
  </select>
</label>

<ul id="motivationChecklist"></ul>

<button id="addTaskBtn" class="btn">Add Custom Step</button>
<button id="addRewardBtn" class="btn">Add Custom Reward</button>
<br>
<button onclick="window.location.href='index.html'" class="btn">Back to Home</button>

<!-- Sounds -->
<audio id="celebrationSound" src="celebration.mp3"></audio>
<audio id="dingSound" src="ding.mp3"></audio>

  <script>
document.addEventListener('DOMContentLoaded', function () {
    const taskSelect = document.getElementById('taskSelect');
    const taskTitle = document.getElementById('taskTitle');
    const stepsContainer = document.getElementById('stepsContainer');
    const celebrationSound = document.getElementById('celebrationSound');

    const prefilledTasks = {
        "Empty Dishwasher": [
            { type: 'step', text: 'Put cutlery away' },
            { type: 'reward', text: 'Listen to a song' },
            { type: 'step', text: 'Put plates away' },
            { type: 'reward', text: 'Watch a short YouTube video' },
            { type: 'step', text: 'Put bowls away' },
            { type: 'reward', text: '3 minute social media scroll' },
            { type: 'step', text: 'Put cups/glasses away' },
            { type: 'reward', text: '' },
            { type: 'step', text: 'Put mugs away' },
            { type: 'reward', text: '' },
            { type: 'step', text: 'Put remaining dishes away' }
        ],
        "Clean Bathroom": [
            { type: 'step', text: 'Scrub sink' },
            { type: 'reward', text: 'Drink a coffee' },
            { type: 'step', text: 'Clean toilet' },
            { type: 'reward', text: 'Stretch for 3 mins' },
            { type: 'step', text: 'Wipe mirror' },
            { type: 'reward', text: '' },
            { type: 'step', text: 'Mop floor' }
        ]
    };

    const rewardOptions = [
        'Listen to a song',
        'Watch a short YouTube video',
        '3 minute social media scroll',
        'Eat a snack',
        'Take a short walk',
        'Custom reward'
    ];

    const bigRewardOptions = [
        'Watch an episode',
        'Go for a walk',
        'Listen to an album',
        'Dance',
        'Relax on the couch',
        'Eat something yum',
        'Custom reward'
    ];

    function createDropdown(options, selectedText, onChangeCallback) {
        const select = document.createElement('select');
        select.classList.add('reward-dropdown');

        options.forEach(option => {
            const opt = document.createElement('option');
            opt.value = option;
            opt.textContent = option;
            if (option === selectedText) opt.selected = true;
            select.appendChild(opt);
        });

        select.addEventListener('change', function () {
            if (this.value === 'Custom reward') {
                const input = document.createElement('input');
                input.type = 'text';
                input.placeholder = 'Enter your reward';
                input.addEventListener('change', function () {
                    onChangeCallback(this.value);
                    select.replaceWith(input);
                });
                this.after(input);
                this.remove();
            } else {
                onChangeCallback(this.value);
            }
        });

        return select;
    }

    function renderTask(taskName, steps) {
        stepsContainer.innerHTML = '';
        taskTitle.textContent = taskName;

        steps.forEach(item => {
            const div = document.createElement('div');
            div.classList.add('check-item');

            if (item.type === 'step') {
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.addEventListener('change', () => {
                    if (checkbox.checked) celebrationSound.play();
                });

                const label = document.createElement('label');
                label.textContent = item.text;
                div.appendChild(checkbox);
                div.appendChild(label);

            } else if (item.type === 'reward') {
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.addEventListener('change', () => {
                    if (checkbox.checked) celebrationSound.play();
                });

                const dropdown = createDropdown(rewardOptions, item.text, (val) => {
                    item.text = val;
                });

                div.appendChild(checkbox);
                div.appendChild(dropdown);
            }

            stepsContainer.appendChild(div);
        });

        // Final reward
        const finalText = document.createElement('p');
        finalText.textContent = 'Task completed! GO YOU!!';
        finalText.classList.add('final-message');
        stepsContainer.appendChild(finalText);

        const bigRewardDiv = document.createElement('div');
        bigRewardDiv.classList.add('check-item');

        const bigCheckbox = document.createElement('input');
        bigCheckbox.type = 'checkbox';
        bigCheckbox.addEventListener('change', () => {
            if (bigCheckbox.checked) celebrationSound.play();
        });

        const bigDropdown = createDropdown(bigRewardOptions, '', (val) => {
            console.log('Big reward chosen:', val);
        });

        bigRewardDiv.appendChild(bigCheckbox);
        bigRewardDiv.appendChild(bigDropdown);
        stepsContainer.appendChild(bigRewardDiv);
    }

    taskSelect.addEventListener('change', function () {
        if (this.value === 'Custom task') {
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = 'Enter your task';
            input.addEventListener('change', function () {
                taskTitle.textContent = this.value;
                renderTask(this.value, []);
            });
            this.after(input);
        } else {
            renderTask(this.value, prefilledTasks[this.value] || []);
        }
    });

    // Load default task on start
    const firstTask = Object.keys(prefilledTasks)[0];
    renderTask(firstTask, prefilledTasks[firstTask]);
});
  </script>
  
