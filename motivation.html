  <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Motivation Tool</title>
<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Barriecito&family=Winky+Sans&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Winky Sans', sans-serif; background-color: #fdf6e3; color: #1b3a2d; padding:20px; text-align:center; }
  h1 { font-family: 'Barriecito', cursive; font-size:3rem; color:#ff9aa2; margin-bottom:20px; }
  label { margin-left:8px; display:block; margin-bottom:10px; }
  #motivationChecklist {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  li {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 10px 0;
  }
  select { margin-left:10px; }
  .special-reward-text { color:#ff6f61; font-weight:bold; font-size:1.3em; margin-top:20px; }
  .btn { background-color:#ff9aa2; color:#fdf6e3; border:none; padding:10px 15px; cursor:pointer; margin-top:10px; font-family:'Barriecito', cursive; display:block; margin-left:auto; margin-right:auto; }
</style>
</head>
<body>

<h1>Motivation Tool</h1>

<label>Choose Overall Task: 
  <select id="taskSelect">
    <option value="emptyDishwasher">Empty Dishwasher</option>
    <option value="cleanBathroom">Clean Bathroom</option>
    <option value="writeEssay">Write Essay</option>
    <option value="laundry">Do Laundry</option>
    <option value="custom">Custom...</option>
  </select>
</label>
<h2 id="currentTaskName" style="text-align:center; margin-top:10px;"></h2>
<ul id="motivationChecklist"></ul>

<button id="addTaskBtn" class="btn">Add Custom Step</button>
<button id="addRewardBtn" class="btn">Add Custom Reward</button>
<br>
<button onclick="window.location.href='index.html'" class="btn">Back to Home</button>

<!-- Sounds -->
<audio id="celebrationSound" src="celebration.mp3"></audio>
<audio id="dingSound" src="ding.mp3"></audio>

<script>
  document.addEventListener('DOMContentLoaded', () => {
  const taskSelect = document.getElementById('taskSelect');
  const currentTaskNameEl = document.getElementById('currentTaskName');
  const stepsContainer = document.getElementById('stepsContainer');
  const celebrationSound = document.getElementById('celebrationSound');

  const prefilledTasks = {
    "Empty Dishwasher": [
      { type: 'step', text: 'Put cutlery away' },
      { type: 'reward', text: 'Listen to a song' },
      { type: 'step', text: 'Put plates away' },
      { type: 'reward', text: 'Watch a short YouTube video' },
      { type: 'step', text: 'Put bowls away' },
      { type: 'reward', text: '3 minute social media scroll' },
      { type: 'step', text: 'Put cups/glasses away' },
      { type: 'reward', text: '' },
      { type: 'step', text: 'Put mugs away' },
      { type: 'reward', text: '' },
      { type: 'step', text: 'Put remaining dishes away' }
    ],
    "Clean Bathroom": [
      { type: 'step', text: 'Scrub sink' },
      { type: 'reward', text: 'Drink a coffee' },
      { type: 'step', text: 'Clean toilet' },
      { type: 'reward', text: 'Stretch for 3 mins' },
      { type: 'step', text: 'Wipe mirror' },
      { type: 'reward', text: '' },
      { type: 'step', text: 'Mop floor' }
    ]
  };

  const rewardOptions = [
    'Listen to a song',
    'Watch a short YouTube video',
    '3 minute social media scroll',
    'Eat a snack',
    'Take a short walk',
    'Custom reward'
  ];

  const bigRewardOptions = [
    'Watch an episode',
    'Go for a walk',
    'Listen to an album',
    'Dance',
    'Relax on the couch',
    'Eat something yum',
    'Custom reward'
  ];

  function createRewardDropdown(initialText) {
    const select = document.createElement('select');
    select.classList.add('reward-dropdown');

    rewardOptions.forEach(optText => {
      const option = document.createElement('option');
      option.value = optText;
      option.textContent = optText;
      if (optText === initialText) option.selected = true;
      select.appendChild(option);
    });

    select.addEventListener('change', () => {
      if (select.value === 'Custom reward') {
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = 'Enter your reward';
        input.style.marginLeft = '10px';
        input.addEventListener('change', () => {
          const newOption = document.createElement('option');
          newOption.value = input.value;
          newOption.textContent = input.value;
          select.insertBefore(newOption, select.lastChild);
          select.value = input.value;
          input.remove();
          select.style.display = '';
        });
        select.after(input);
        select.style.display = 'none';
      }
    });

    return select;
  }

  function addStepWithReward(stepText, rewardText) {
    const div = document.createElement('div');
    div.classList.add('check-item');

    if (stepText) {
      const stepCheckbox = document.createElement('input');
      stepCheckbox.type = 'checkbox';
      stepCheckbox.addEventListener('change', () => {
        if (stepCheckbox.checked) celebrationSound.play();
      });
      const stepLabel = document.createElement('label');
      stepLabel.textContent = stepText;
      div.appendChild(stepCheckbox);
      div.appendChild(stepLabel);
    }

    if (rewardText !== undefined) {
      const rewardCheckbox = document.createElement('input');
      rewardCheckbox.type = 'checkbox';
      rewardCheckbox.addEventListener('change', () => {
        if (rewardCheckbox.checked) celebrationSound.play();
      });
      const rewardDropdown = createRewardDropdown(rewardText);
      div.appendChild(rewardCheckbox);
      div.appendChild(rewardDropdown);
    }

    stepsContainer.appendChild(div);
  }

  function addFinalReward() {
    const finalText = document.createElement('h3');
    finalText.textContent = 'Task completed! GO YOU!!';
    finalText.style.textAlign = 'center';
    finalText.style.marginTop = '20px';
    stepsContainer.appendChild(finalText);

    const bigDiv = document.createElement('div');
    bigDiv.classList.add('check-item');
    const bigCheckbox = document.createElement('input');
    bigCheckbox.type = 'checkbox';
    bigCheckbox.addEventListener('change', () => {
      if (bigCheckbox.checked) celebrationSound.play();
    });

    const bigDropdown = document.createElement('select');
    bigRewardOptions.forEach(opt => {
      const option = document.createElement('option');
      option.value = opt;
      option.textContent = opt;
      bigDropdown.appendChild(option);
    });

    bigDropdown.addEventListener('change', () => {
      if (bigDropdown.value === 'Custom reward') {
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = 'Enter your reward';
        input.style.marginLeft = '10px';
        input.addEventListener('change', () => {
          const newOption = document.createElement('option');
          newOption.value = input.value;
          newOption.textContent = input.value;
          bigDropdown.insertBefore(newOption, bigDropdown.lastChild);
          bigDropdown.value = input.value;
          input.remove();
          bigDropdown.style.display = '';
        });
        bigDropdown.after(input);
        bigDropdown.style.display = 'none';
      }
    });

    bigDiv.appendChild(bigCheckbox);
    bigDiv.appendChild(bigDropdown);
    stepsContainer.appendChild(bigDiv);
  }

  function renderChecklist(taskName, stepsArray) {
    stepsContainer.innerHTML = '';
    stepsArray.forEach(item => {
      addStepWithReward(item.type === 'step' ? item.text : '', item.type === 'reward' ? item.text : '');
    });
    addFinalReward();
  }

  // Task selection handler
  taskSelect.addEventListener('change', () => {
    let selectedTask = taskSelect.value;
    let steps = [];

    if (selectedTask === 'custom') {
      const name = prompt('Enter your custom overall task name:');
      const displayName = (name && name.trim()) ? name.trim() : 'Custom Task';
      currentTaskNameEl.textContent = displayName;
    } else {
      currentTaskNameEl.textContent = selectedTask;
      steps = JSON.parse(JSON.stringify(prefilledTasks[selectedTask] || []));
    }

    renderChecklist(selectedTask, steps);
  });

  // Load default
  const firstTask = Object.keys(prefilledTasks)[0];
  currentTaskNameEl.textContent = firstTask;
  renderChecklist(firstTask, prefilledTasks[firstTask]);
});
<script>
</body>
</html>
